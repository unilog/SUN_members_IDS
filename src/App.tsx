import React, { useState } from "react";
import axios from "axios";

const initialFids = [
  365477508, 124894938, 124828584, 123681448, 125745367, 125155761, 125614467,
  124517041, 117152533, 124091159, 125270212, 124533573, 128682333, 77912425,
  132002291, 131515268, 124894124, 123320909, 125895950, 107707686, 118859653,
  108291180, 122665429, 125139494, 119645894, 122157484, 97517426, 127119171,
  125025155, 122698530, 123304804, 125745695, 122698081, 124762717, 125401964,
  125680211, 162585692, 125811598, 122960375, 129012457, 140870011, 127203712,
  126518102, 124664599, 130966903, 125680183, 124081187, 125664025, 133024579,
  124566148, 125466874, 128418908, 130966903, 125680183, 124081187, 125664025,
  133024579, 124566148, 125466874, 128418908, 124025155, 351146868, 365477508,
  369397875, 371069213, 369217901, 373344160, 369433958, 369646738, 370482471,
  375801671, 369237218, 374163322, 126387010, 127206535, 117876425, 132002291,
  131515268, 124894124, 123320909, 125895950, 107707686, 118859653, 108291180,
  122665429, 125139494, 119645894, 122157484, 97517426, 127119171, 125025155,
  122698530, 123304804, 125745695, 122698081, 124762717, 125401964, 125680211,
  162585692, 125811598, 122960375, 129012457, 140870011, 127203712, 126518102,
  124664599, 130966903, 125680183, 124081187, 125664025, 133024579, 124566148,
  125466874, 128418908, 124025155, 351146868, 365477508, 369397875, 371069213,
  369217901, 373344160, 369433958, 369646738, 370482471, 375801671, 369237218,
  374163322,
];

export default function App() {
  const [fids, setFids] = useState(initialFids.join(", "));

  const saveToDB = async () => {
    try {
      const response = await axios.post(
        "https://vy26vp-3001.csb.app/save-fids",
        {
          fids: fids.split(",").map(Number),
        }
      );

      alert(`Data saved successfully. ID: ${response.data.id}`);
    } catch (error) {
      console.error(error);
      alert(`Error: ${error.message}`);
    }
  };

  return (
    <div>
      <h1>Save Fids to MongoDB</h1>
      <textarea
        className="border p-2 w-full h-64"
        value={fids}
        onChange={(e) => setFids(e.target.value)}
      />
      <button
        className="mt-2 bg-blue-500 text-white px-4 py-2 rounded"
        onClick={saveToDB}
      >
        Save to Database
      </button>
    </div>
  );
}
